<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>QR Belge OluÅŸtur</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-900 flex items-center justify-center min-h-screen">
  <div class="bg-white p-8 rounded-lg shadow-lg w-full max-w-md">
    <h2 class="text-xl font-bold mb-6 text-center">ğŸ“¦ Firestore Belge OluÅŸtur</h2>

    <label class="block mb-2 font-semibold">MÃ¼ÅŸteri ID</label>
    <input id="idInput" type="text" placeholder="Ã¶rnek: 42PGx4oJC6PkQaO6HQhc" class="w-full p-2 border rounded mb-4">

    <label class="block mb-2 font-semibold">Ã‡ekim TÃ¼rÃ¼</label>
    <select id="typeSelect" class="w-full p-2 border rounded mb-6">
      <option value="DÃœÄÃœN">DÃ¼ÄŸÃ¼n</option>
      <option value="NÄ°ÅAN">NiÅŸan</option>
      <option value="DIÅ Ã‡EKÄ°M">DÄ±ÅŸ Ã‡ekim</option>
    </select>

    <button onclick="addDocument()" class="w-full bg-red-700 text-white py-2 rounded font-bold hover:bg-red-800 transition">Belgeyi OluÅŸtur</button>

    <p id="status" class="mt-4 text-center text-sm text-gray-700 font-semibold"></p>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyAZxHq28my4VLR-xX94wvkr6Gf-ohyeH98",
      authDomain: "e-y-yonetici.firebaseapp.com",
      projectId: "e-y-yonetici"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    async function addDocument() {
      const id = document.getElementById("idInput").value.trim();
      const type = document.getElementById("typeSelect").value;
      const status = document.getElementById("status");

      if (!id) {
        status.textContent = "âš ï¸ LÃ¼tfen mÃ¼ÅŸteri ID girin.";
        return;
      }

      const qrLink = `https://emre16-61.github.io/yonetici-qr-kod/index.html?id=${id}`;
      const displayText = "GÃ–KYÃœZÃœNDEN YAKALANAN EÅSÄ°Z GÃ–RÃœNTÃœLERLE Ã–LÃœMSÃœZLEÅTÄ°RÄ°LEN DÄ°JÄ°TAL HÄ°KAYENÄ°ZÄ° KEÅFEDÄ°N. KODU TARAYIN VE UNUTULMAZ BÄ°R KEÅFE Ã‡IKIN!";
      let thankYou = "";

      if (type === "DÃœÄÃœN") {
        thankYou = "DÃœÄÃœN GÃ–RÃœNTÃœLERÄ°NÄ°ZÄ° KEÅFEDÄ°N. KODU TARAYIN VE UNUTULMAZ BÄ°R YOLCULUÄA Ã‡IKIN!";
      } else {
        thankYou = "GÃ–KYÃœZÃœNDEN YAKALANAN EÅSÄ°Z GÃ–RÃœNTÃœLERLE Ã–LÃœMSÃœZLEÅTÄ°RÄ°LEN DÄ°JÄ°TAL HÄ°KAYENÄ°ZÄ° KEÅFEDÄ°N. KODU TARAYIN VE UNUTULMAZ BÄ°R KEÅFE Ã‡IKIN!";
      }

      try {
        await setDoc(doc(db, "bekleyen_rezervasyonlar", id), {
          qrCodeContent: qrLink,
          qrCodeDisplayText: displayText,
          thankYouMessage: thankYou
        });
        status.textContent = "âœ… Belge baÅŸarÄ±yla oluÅŸturuldu.";
      } catch (error) {
        status.textContent = "âŒ Hata oluÅŸtu: " + error.message;
      }
    }
  </script>
</body>
</html>